{% extends "core/layouts/base.html" %}
{% load static %}
{% block head_title %}
{{ schema.name }} - Schemas.Pub
{% endblock %}
{% block extra_head %}
<script src="{% static 'js/schema-detail.js' %}"></script>
{% endblock %}

{% block page_content %}
<main class="schema-detail">
  <h1>{{ schema.name }}</h1>
  <div class="content">
    <section class="sidebar">
      <h2 class="text--primary">Details</h2>
      <p>Added on {{ schema.created_at | date }}</p>
      <p>Managed by {{ schema.created_by }}</p>
    </section>
    <section class="main-content">
      {% if latest_readme_content %}
      <h2>Latest README:</h2>
      <div class="markdown">
        {{ latest_readme_content }}
      </div>
      {% endif %}
      {% if latest_definition %}
      <h2>Latest definition:</h2>
      <pre class="schema-definition"><code>{{ latest_definition|escape }}</code></pre>
      {% endif %}
      {% if schema.schemaref_set.exists %}
      <h2>Reference links:</h2>
      <ul>
        {% for schema_ref in schema.schemaref_set.all|dictsortreversed:"created_by" %}
        <li><a href="{{schema_ref.url}}">{{schema_ref.url}}</a></li>
        {% endfor %}
      </ul>
      {% endif %}
      {% if schema.documentationitem_set.exists %}
      <h2>Documentation links:</h2>
      <ul>
        {% for documentation_item in schema.documentationitem_set.all|dictsort:"name" %}
        <li><a href="{{documentation_item.url}}">{{documentation_item.name}}</a>
        {% endfor %}
      </ul>
      {% endif %}
    </section>
  </div>
</main>
{% endblock %}
